<!DOCTYPE html>
<html lang="en-us">

<head>
    <title>FriendFinder: Home</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Boostrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
     <!-- Chosen -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <!-- JQUERY SCRIPT -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
    <div class="container-fluid full" style="background-image: url(/trialpic.jpg); background-position:center; background-repeat:no-repeat; background-size:cover; height: 2300px; filter: invert(10%); font-size:22px">
        <div class="wrapper jumbotron text-center" style="opacity: 0.85; width:85%; margin: 0 auto">
            <div class="div">
            	<header>
            		<h1 style="font-weight:bold; color:#337ab7">Check Mate</h1>
            		<h2 style="font-weight:bold; color:#337ab7">Select Answers to Find Your New Best Friend!</h2>
            	</header>
            <hr style="border-top:5px solid #274056; width:30%">	
            </div>

            <br>
            <br>
            <div class="row text-center" style="margin: 0 auto">
				<section class="row form-group text-center">
					<label for="text-input" class="col-sm-3 col-form-label text-align" style="padding-right:0px">Name (Required): </label>
					<div class="col-sm-8">
						<input id="name-submit" class="profile-control form-control" type="text" placeholder="Tell us your name." required>
					</div>
				</section>
				<section class="row form-group text-center">
					<label for="url=input" class="col-sm-3 col-form-label text-center" style="padding-right:0px">Photo (Required): </label>
					<div class="col-sm-8">
						<input id="photo-submit" class="profile-control form-control" type="text" placeholder="Show us your profile picture." required>
					</div>
				</section>
			</div>

            <br>
            <br>
            <div class="row">
                <div class="col-sm-12">
                    <h4 style="font-size:24px; color:black; font-weight:bold">1. When asked, you proudly state Batman outranks Superman.</h4>
                    <select id="q1" dataplaceholder="" class="survey-control chosen-select">
                        <option value="Please Select One Option Below"></option>
                        <option value="1">1 (Are you kidding?)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Heck yeah!!)</option>
                    </select>
                </div>
            </div>
            <br>
            <br>
            <div class="row">
                <div class="col-sm-12">
                    <h4 style="font-size:24px; color:black; font-weight:bold">2. You drink more coffee than tea.</h4>
                    <select id="q2" dataplaceholder="" class="survey-control chosen-select">
                        <option value=""></option>
                        <option value="1">1 (Are you kidding?)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Heck yeah!!)</option>
                    </select>
                </div>
            </div>
            <br>
            <br>
            <div class="row">
                <div class="col-sm-12">
                    <h4 style="font-size:24px; color:black; font-weight:bold">3. Sometimes you drive the long way to work, just to avoid waiting in traffic.</h4>
                    <select id="q3" dataplaceholder="" class="survey-control chosen-select">
                        <option value="Please Select One Option Below"></option>
                        <option value="1">1 (Are you kidding?)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Heck yeah!!)</option>
                    </select>
                </div>
            </div>
            <br>
            <br>
            <div class="row">
                <div class="col-sm-12">
                    <h4 style="font-size:24px; color:black; font-weight:bold">4. La Croix makes you think of "The Cross" before the Orange County Soccer Player.</h4>
                    <select id="q4" class="survey-control chosen-select" dataplaceholder="">
                        <option value="Please Select One Option Below"></option>
                        <option value="1">1 (Are you kidding?)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Heck yeah!!)</option>
                    </select>
                </div>
            </div>
            <br>
            <br>
            <div class="row">
                <div class="col-sm-12">
                    <h4 style="font-size:24px; color:black; font-weight:bold">5. You'd rather hike Mt. Fuji than scuba dive in the Carribean Ocean.</h4>
                    <select id="q5" class="survey-control chosen-select" data-placeholder="">
                        <option value="Please Select One Option Below"></option>
                        <option value="1">1 (Are you kidding?)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Heck yeah!!)</option>
                    </select>
                </div>
            </div>
            <br>
            <br>
            <div class="row">
                <div class="col-sm-12">
                    <h4 style="font-size:24px; color:black; font-weight:bold">6. When in Paris, you would wait an hour for the perfect macaron.</h4>
                    <select id="q6" class="survey-control chosen-select" data-placeholder="">
                        <option value="Please Select One Option Below"></option>
                        <option value="1">1 (Are you kidding?)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Heck yeah!!)</option>
                    </select>
                </div>
            </div>
            <br>
            <br>
            <div class="row">
                <div class="col-sm-12">
                    <h4 style="font-size:24px; color:black; font-weight:bold">7. You prefer being hot to being cold.</h4>
                    <select id="q7" class="survey-control chosen-select" data-placeholder="">
                        <option value="Please Select One Option Below"></option>
                        <option value="1">1 (Are you kidding?)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Heck yeah!!)</option>
                    </select>
                </div>
            </div>
            <br>
            <br>
            <div class="row">
                <div class="col-sm-12">
                    <h4 style="font-size:24px; color:black; font-weight:bold">8. You prefer using a Kindle than Paperback copies when reading for leisure.</h4>
                    <select id="q8" class="survey-control chosen-select" data-placeholder="">
                        <option value="Please Select One Option Below"></option>
                        <option value="1">1 (Are you kidding?)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Heck yeah!!)</option>
                    </select>
                </div>
            </div>
            <br>
            <br>
            <div class="row">
                <div class="col-sm-12">
                    <h4 style="font-size:24px; color:black; font-weight:bold">9.Your favorite method of transport is the train.</h4>
                    <select id="q9" class="survey-control chosen-select" data-placeholder="">
                        <option value="Please Select One Option Below"></option>
                        <option value="1">1 (Are you kidding?)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Heck yeah!!)</option>
                    </select>
                </div>
            </div>
            <br>
            <br>
            <div class="row">
                <div class="col-sm-12">
                    <h4 style="font-size:24px; color: black; font-weight:bold">10. Your next trip abroad is not a matter of if, but when..."</h4>
                    <select id="q10" class="survey-control chosen-select" data-placeholder="">
                        <option value="Please Select One Option Below"></option>
                        <option value="1">1 (Are you kidding?)</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5 (Heck yeah!!)</option>
                    </select>
                </div>
            </div>
            <br>
            <br>

            <hr style="border-top:5px solid #274056; width:30%">
			<div class="row">
				<div class="col-sm-12">
					<div>
                        <a href="/results"><button id="submit-survey" type="button" class="btn btn-lg btn-primary">Check Your Mate!</button></a> <!-- //Replace the "# with the following route: "/results".  the button should take us to the "results page, while ALSO posting the data to the /api/friends page..." -->

                         <!-- THE RESULTS href here, refers to the file route that we have esablished in the html routes, and is NOT the exact rile pathway (with the file extention, ie: html or js) itself. As long as the htmlRoutes.js file routing functions are working, AND match the href path provided above, this path SHOULD take us to the respective file, as mentioned in the routing file funcs. -->
					</div>
				</div>
			</div>

			<hr style="border-top:5px solid #274056; width:20%">
			<footer class="footer">
				<div class="container">
					<a href="/api/friends" style="color:black">Current Friends List (Raw JSON)</a>
					|
					<a href="https://github.com/JettTech" style="color:black">My GitHub Repo</a>
			    </div>
			</footer>
        </div>
    </div>

<script type="text/javascript">
    //Chosen CC:
    var config = {
        "chosen-select": {},
        "chosen-select-deselect": { allow_single_deselect: true },
        "chosen-select-no-single": { disable_search_threshold: 10 },
        "chosen-select-no-results": { no_results_text: "Nothing to be found here..." },
        "chosen-select-width": { width: "95%" }
    };

    console.log("CHROME USER: You're inside the survey.html file...");

	$("#submit-survey").on("click", function() {
		var formIsValid = true; //setting this function to lead into a boolean, that acts as a swtich.  When false, then this function will return false...

        function formReview() {
            $(".profile-control").each(function() { //name and pic input verification
                if($(this).val() === "") { //"this" === the context of the currently running function, which in this case would be each one of the tags that has a .profile-control class indivudally, as the loop passes through them....
                    formIsValid = false;
                }
            });
            $(".survey-control").each(function() { //survey question verification
                if($(this).val() === "") {
                    formIsValid = false;
                }
            }) 
            //this function will RETURN "true" IF, and ONLY IF, the value was not changed to false, and thus cleared the review of values on the survey page (aka. All inputs have a value differnt than null/undefined).
        };
        formReview();

        if (!formIsValid){
            event.preventDefault();

            alert("We can't pair you with someone if we don't first know your preferencs!!  \nPlease complete all the questions in the form. \n(^.^)");

            // $.get("/survey", function(request, result) { // !!!!! Why dosen't this "get" method work????
            //     
            // })

            console.log("refreshing the page..");
            //location(reload); //this doesn't work (AT LEAST not on its own... without the "event.preventDefault()"... WHY?)

            // function pageRedirect() { 
            //     window.location.replace("/survey") //this doesn't work... WHY?
            // };
            // setTimeout("pageRedirect()", 10000);
        }   
        else if (formIsValid) { //IF the above function, "formReview", returns "formIsValid" to be "true" -which would only happen if "formIsValid" returns true- then the following function will begin....
            console.log("return form is valid"); 
            console.log("... now the newFriendsList collection will begin.");
            var newFriendList = {
                name: $("#name-submit").val().trim(),
                photo: $("#photo-submit").val().trim(),
                scores:[
                    $("#q1").val().trim(),
                    $("#q2").val().trim(),
                    $("#q3").val().trim(),
                    $("#q4").val().trim(),
                    $("#q5").val().trim(),
                    $("#q6").val().trim(),
                    $("#q7").val().trim(),
                    $("#q8").val().trim(),
                    $("#q9").val().trim(),
                    $("#q10").val().trim()
                ]
            };
            console.log(newFriendList); //this console.logs the new user response object ("newFriendList") to the Browser (Chrome) Console.
            var currentURL = window.location.origin;

            //BELOW is the AJAX REQUEST to POST the data to the friends.js file
            $.post(currentURL + "/api/friends", newFriendList, function(data){ //!! WHAT is passing into "DATA" here?  //In the POST method, the "newFriendsList" var acts at the "POST REQUEST" from the user... 
                console.log("The newfriendlist object is posting!!!!");
                alert("Yea!!!!! Going to the next page...");
            }); 
            $.post(currentURL + "/results", function(data){
                console.log("trying to send the data to the '/results' page.");
            })
        };
    });        
</script>

</body>
</html>

<!-- 
// ======Note about jQuery's "FOR EACH" statement (above: lines 237-246):========
        // =========================================================== 
        //1.) The $.each() function is not the same as $(selector).each(), which is used to iterate, exclusively, over a jQuery object.

        //2.) !! The  $.each() function can be used to iterate over any collection, whether it is an object or an array. In the case of an array, the callback is passed an array index and a corresponding array value each time. ~!!~(The value can also be accessed through the *this* keyword, but Javascript will !! always wrap the this value as an Object !! even if it is a simple string or number value. !!) ~!!~

        //3.) We can break the $.each() loop at a particular iteration by making the callback function return false. Returning non-false is the same as a continue statement in a for loop; it will skip immediately to the next iteration. -->
        